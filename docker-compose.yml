version: '3.8'

services:
  # ==============================
  # FRONTEND (Nginx + React)
  # ==============================
  shortsai-studio:
    container_name: shortsai-studio
    build:
      context: .
      dockerfile: Dockerfile
      args:
        VITE_API_URL: /api
    ports:
      - "80:80" # HTTP
      - "443:443" # HTTPS
    volumes:
      # Mount Let's Encrypt certificates from host
      - /etc/letsencrypt:/etc/letsencrypt:ro
      - /var/www/certbot:/var/www/certbot:ro
    environment:
      - VITE_API_URL=/api
    restart: always
    networks:
      - shortsai-network

# ==============================
# CONEXÃO COM A REDE
# ==============================
networks:
  shortsai-network:
    external: true # Diz "Não crie, use a que já existe"
    name: shortsai-network # Nome exato criado pelo Backend
